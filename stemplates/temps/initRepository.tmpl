package repository

import (
	"{{ .ProjectName }}/cache"
	"{{ .ProjectName }}/configs"
	"gorm.io/gorm"
)



// AppDatabase Service wraps Dababase service(SQL)
type {{ .AppName | toPascalCase }}Repository struct {
	DB *gorm.DB
	Cache *cache.CacheService
	Cfg   *configs.EnvConfig
	ForeignRegex *regexp.Regexp
    NumberRegex  *regexp.Regexp
}



func InitRepository(client *gorm.DB, cacheService *cache.CacheService, cfg *configs.EnvConfig) *{{ .AppName | toPascalCase }}Repository {

	return &{{ .AppName | toPascalCase }}Repository{
		DB:    client,
		Cache: cacheService,
		Cfg:   cfg,
        ForeignRegex: regexp.MustCompile(`(?i)_id$`), // Prepare regex to check for *_id pattern
        NumberRegex:  regexp.MustCompile(`^\d+$`),
	}

}
